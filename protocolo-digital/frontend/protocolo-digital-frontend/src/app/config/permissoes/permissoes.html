<h2>Permissões</h2>
<ul>
  <li *ngFor="let p of permissoes">
    {{p.usuario.nome}} - {{p.acao.nome}} - {{p.setor?.nome || 'Todos'}}
    <button (click)="editar(p)">Editar</button>
    <button (click)="deletar(p.id)">Excluir</button>
  </li>
</ul>
<form (ngSubmit)="salvar()">
  <label>
    Usuário
    <select [(ngModel)]="nova.usuario" name="usuario">
      <option *ngFor="let u of usuarios" [value]="u.id">{{u.nome}}</option>
    </select>
  </label>

  <label>
    Tipo de Protocolo
    <select [(ngModel)]="nova.tipoProtocolo" name="tipo">
      <option value="0">Todos</option>
      <option *ngFor="let t of tipos" [value]="t.id">{{t.nome}}</option>
    </select>
  </label>

  <label>
    Setor
    <select [(ngModel)]="nova.setor" name="setor">
      <option value="0">Todos</option>
      <option *ngFor="let s of setores" [value]="s.id">{{s.nome}}</option>
    </select>
  </label>

  <label *ngIf="acaoSelecionada?.nome === 'Aprovar'">
    Valor Máximo
    <input [(ngModel)]="nova.valorMaximo" name="valor" type="number">
  </label>

  <label>
    Ação
    <select [(ngModel)]="nova.acao" name="acao" (change)="verificarAcao()">
      <option *ngFor="let a of acoes" [value]="a.id">{{a.nome}}</option>
    </select>
  </label>

  <button type="submit">{{editandoId ? 'Atualizar' : 'Salvar'}}</button>
  <button type="button" *ngIf="editandoId" (click)="cancelar()">Cancelar</button>
</form>
